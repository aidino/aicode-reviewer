<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Frontend - AI Code Reviewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .debug-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 4px solid #3b82f6;
            background: #eff6ff;
            color: #1e40af;
        }
    </style>
</head>
<body>
    <h1>üîç Debug Frontend Issues</h1>
    
    <div class="debug-section">
        <h3>1. Frontend Connectivity Test</h3>
        <button onclick="testFrontendBase()">Test Frontend Base URL</button>
        <button onclick="testFrontendLogin()">Test Login Route</button>
        <div id="connectivity-result"></div>
    </div>

    <div class="debug-section">
        <h3>2. JavaScript Error Detection</h3>
        <button onclick="openFrontendWithConsole()">Open Frontend (Check Console)</button>
        <div class="result">
            <strong>H∆∞·ªõng d·∫´n:</strong>
            <ol>
                <li>Click "Open Frontend (Check Console)" ƒë·ªÉ m·ªü tab m·ªõi</li>
                <li>B·∫•m F12 ƒë·ªÉ m·ªü Developer Tools</li>
                <li>V√†o tab Console ƒë·ªÉ xem errors</li>
                <li>Ki·ªÉm tra tab Network ƒë·ªÉ xem failed requests</li>
            </ol>
        </div>
    </div>

    <div class="debug-section">
        <h3>3. Container Status Check</h3>
        <button onclick="checkBackendAPI()">Test Backend API</button>
        <div id="backend-result"></div>
    </div>

    <div class="debug-section">
        <h3>4. Manual Steps</h3>
        <div class="result">
            <strong>C√°c b∆∞·ªõc debug th·ªß c√¥ng:</strong>
            <ol>
                <li><strong>Ki·ªÉm tra containers:</strong> <code>docker-compose ps</code></li>
                <li><strong>Restart frontend:</strong> <code>docker-compose restart frontend</code></li>
                <li><strong>Check logs:</strong> <code>docker-compose logs frontend -f</code></li>
                <li><strong>Clear cache:</strong> Ctrl+Shift+R trong browser</li>
                <li><strong>Test direct Vite:</strong> <code>curl http://localhost:5173</code></li>
            </ol>
        </div>
    </div>

    <script>
        function showResult(elementId, message) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="result">${message}</div>`;
        }

        async function testFrontendBase() {
            try {
                showResult('connectivity-result', 'Testing frontend base URL...');
                
                const response = await fetch('http://localhost:5173/');
                
                if (response.ok) {
                    const html = await response.text();
                    const hasRoot = html.includes('<div id="root">');
                    
                    showResult('connectivity-result', 
                        `‚úÖ Frontend base accessible!<br>
                         Status: ${response.status}<br>
                         Has root div: ${hasRoot ? 'Yes' : 'No'}<br>
                         Response size: ${html.length} chars`);
                } else {
                    showResult('connectivity-result', 
                        `‚ùå Frontend base failed: ${response.status}`);
                }
            } catch (error) {
                showResult('connectivity-result', 
                    `‚ùå Frontend base error: ${error.message}`);
            }
        }

        async function testFrontendLogin() {
            try {
                showResult('connectivity-result', 'Testing login route...');
                
                const response = await fetch('http://localhost:5173/login');
                
                if (response.ok) {
                    const html = await response.text();
                    const hasRoot = html.includes('<div id="root">');
                    
                    showResult('connectivity-result', 
                        `‚úÖ Login route accessible!<br>
                         Status: ${response.status}<br>
                         Has root div: ${hasRoot ? 'Yes' : 'No'}<br>
                         Response size: ${html.length} chars`);
                } else {
                    showResult('connectivity-result', 
                        `‚ùå Login route failed: ${response.status}`);
                }
            } catch (error) {
                showResult('connectivity-result', 
                    `‚ùå Login route error: ${error.message}`);
            }
        }

        function openFrontendWithConsole() {
            window.open('http://localhost:5173/login', '_blank');
            showResult('connectivity-result', 
                `üîç ƒê√£ m·ªü frontend trong tab m·ªõi.<br>
                 <strong>B∆∞·ªõc ti·∫øp theo:</strong><br>
                 1. B·∫•m F12 ƒë·ªÉ m·ªü Developer Tools<br>
                 2. Ki·ªÉm tra Console tab xem c√≥ errors kh√¥ng<br>
                 3. Ki·ªÉm tra Network tab xem failed requests<br>
                 4. N·∫øu m√†n h√¨nh tr·∫Øng, check Elements tab xem c√≥ content trong #root`);
        }

        async function checkBackendAPI() {
            try {
                showResult('backend-result', 'Testing backend API...');
                
                const response = await fetch('http://localhost:8000/health');
                const data = await response.json();
                
                if (response.ok) {
                    showResult('backend-result', 
                        `‚úÖ Backend API working!<br>
                         Status: ${data.status}<br>
                         Service: ${data.service}<br>
                         Components: ${Object.keys(data.components || {}).join(', ')}`);
                } else {
                    showResult('backend-result', 
                        `‚ùå Backend API failed: ${data.detail || 'Unknown error'}`);
                }
            } catch (error) {
                showResult('backend-result', 
                    `‚ùå Backend API error: ${error.message}`);
            }
        }

        // Auto-run basic tests
        window.onload = function() {
            testFrontendBase();
            checkBackendAPI();
        };
    </script>
</body>
</html> 